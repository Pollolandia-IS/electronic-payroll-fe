generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlserver"
  url      = env("DATABASE_URL")
}

model aplica_b {
  cedulaEmpleado  String     @db.VarChar(12)
  fechaHora       DateTime   @db.DateTime
  cedulaJuridica  String     @db.VarChar(12)
  nombreProyecto  String     @db.VarChar(100)
  nombreBeneficio String     @db.VarChar(100)
  pago            pago       @relation(fields: [cedulaEmpleado, fechaHora], references: [cedulaEmpleado, fechaHora], onUpdate: NoAction, map: "FK__aplica_b__075714DC")
  beneficios      beneficios @relation(fields: [cedulaJuridica, nombreProyecto, nombreBeneficio], references: [cedulaJuridica, nombreProyecto, nombreBeneficio], onDelete: Cascade, map: "FK__aplica_b__0662F0A3")

  @@id([cedulaEmpleado, fechaHora, cedulaJuridica, nombreProyecto, nombreBeneficio], map: "PK__aplica_b__83C60FEB90D8B13C")
}

model aplica_do {
  cedulaEmpleado       String               @db.VarChar(12)
  fechaHora            DateTime             @db.DateTime
  nombreDO             String               @db.VarChar(50)
  pago                 pago                 @relation(fields: [cedulaEmpleado, fechaHora], references: [cedulaEmpleado, fechaHora], onUpdate: NoAction, map: "FK__aplica_do__7EC1CEDB")
  deduccionObligatoria deduccionObligatoria @relation(fields: [nombreDO], references: [nombre], onDelete: Cascade, map: "FK__aplica_do__nombr__7FB5F314")

  @@id([cedulaEmpleado, fechaHora, nombreDO], map: "PK__aplica_d__7A7DC79C84137915")
}

model aplica_dv {
  cedulaEmpleado      String              @db.VarChar(12)
  fechaHora           DateTime            @db.DateTime
  cedulaJuridica      String              @db.VarChar(12)
  nombreProyecto      String              @db.VarChar(100)
  nombreDeduccion     String              @db.VarChar(100)
  pago                pago                @relation(fields: [cedulaEmpleado, fechaHora], references: [cedulaEmpleado, fechaHora], onUpdate: NoAction, map: "FK__aplica_dv__7BE56230")
  deduccionVoluntaria deduccionVoluntaria @relation(fields: [cedulaJuridica, nombreProyecto, nombreDeduccion], references: [cedulaJuridica, nombreProyecto, nombreDeduccion], onDelete: Cascade, map: "FK__aplica_dv__7AF13DF7")

  @@id([cedulaEmpleado, fechaHora, cedulaJuridica, nombreProyecto, nombreDeduccion], map: "PK__aplica_d__A195D31772E46588")
}

model beneficios {
  cedulaJuridica  String       @db.VarChar(12)
  nombreProyecto  String       @db.VarChar(100)
  nombreBeneficio String       @db.VarChar(100)
  montoPago       Int?
  descripcion     String?      @db.Text
  habilitado      Boolean?
  proyecto        proyecto     @relation(fields: [cedulaJuridica, nombreProyecto], references: [cedulaJuridica, nombre], onDelete: Cascade, map: "FK__beneficios__6BAEFA67")
  aplica_b        aplica_b[]
  selecciona      selecciona[]

  @@id([cedulaJuridica, nombreProyecto, nombreBeneficio], map: "PK__benefici__AC9FC4E05E13574D")
}

model credenciales {
  email       String     @id(map: "PK__credenci__AB6E6165CC36BAC1") @db.VarChar(100)
  contrasenna String?    @db.VarChar(250)
  verificado  Boolean?
  hace_uso    hace_uso[]
}

model deduccionObligatoria {
  nombre     String      @id(map: "PK__deduccio__72AFBCC72D51DE4B") @db.VarChar(50)
  porcentaje Int?
  aplica_do  aplica_do[]
}

model deduccionVoluntaria {
  cedulaJuridica  String      @db.VarChar(12)
  nombreProyecto  String      @db.VarChar(100)
  nombreDeduccion String      @db.VarChar(100)
  descripcion     String?     @db.Text
  monto           Int?
  habilitado      Boolean?
  proyecto        proyecto    @relation(fields: [cedulaJuridica, nombreProyecto], references: [cedulaJuridica, nombre], onDelete: Cascade, map: "FK__deduccionVolunta__603D47BB")
  aplica_dv       aplica_dv[]
  escoge          escoge[]

  @@id([cedulaJuridica, nombreProyecto, nombreDeduccion], map: "PK__deduccio__FF4338C2DABA10B1")
}

model empleado {
  cedula         String         @id(map: "PK__empleado__415B7BE4CDAD784F") @db.VarChar(12)
  cedulaJuridica String?        @db.VarChar(12)
  persona        persona        @relation(fields: [cedula], references: [cedula], onUpdate: NoAction, map: "FK__empleado__cedula__59904A2C")
  empresa        empresa?       @relation(fields: [cedulaJuridica], references: [cedulaJuridica], onDelete: NoAction, onUpdate: NoAction, map: "FK__empleado__cedula__5A846E65")
  escoge         escoge[]
  esContratado   esContratado[]
  pago           pago[]
  reporteHoras   reporteHoras[]
  selecciona     selecciona[]
}

model empleador {
  cedula       String         @id(map: "PK__empleado__415B7BE4021828C9") @db.VarChar(12)
  persona      persona        @relation(fields: [cedula], references: [cedula], onUpdate: NoAction, map: "FK__empleador__cedul__53D770D6")
  empresa      empresa[]
  reporteHoras reporteHoras[]
}

model empresa {
  cedulaJuridica  String     @id(map: "PK__empresa__DD9A4FB593AF6BEA") @db.VarChar(12)
  telefono        Int?
  direccion       String?    @db.VarChar(250)
  razonSocial     String?    @db.VarChar(250)
  paginaWeb       String?    @db.VarChar(100)
  email           String?    @db.VarChar(100)
  habilitado      Boolean?
  cedulaEmpleador String?    @db.VarChar(12)
  empleador       empleador? @relation(fields: [cedulaEmpleador], references: [cedula], onDelete: NoAction, onUpdate: NoAction, map: "FK__empresa__cedulaE__56B3DD81")
  empleado        empleado[]
  proyecto        proyecto[]
}

model escoge {
  cedulaEmpleado      String              @db.VarChar(12)
  cedulaJuridica      String              @db.VarChar(12)
  nombreProyecto      String              @db.VarChar(100)
  nombreDeduccion     String              @db.VarChar(100)
  aporte              Int?
  habilitado          Boolean?
  empleado            empleado            @relation(fields: [cedulaEmpleado], references: [cedula], onUpdate: NoAction, map: "FK__escoge__cedulaEm__74444068")
  deduccionVoluntaria deduccionVoluntaria @relation(fields: [cedulaJuridica, nombreProyecto, nombreDeduccion], references: [cedulaJuridica, nombreProyecto, nombreDeduccion], onDelete: Cascade, map: "FK__escoge__73501C2F")

  @@id([cedulaEmpleado, cedulaJuridica, nombreProyecto, nombreDeduccion], map: "PK__escoge__B37804831008FC52")
}

model esContratado {
  cedulaJuridica String    @db.VarChar(12)
  nombreProyecto String    @db.VarChar(100)
  cedulaEmpleado String    @db.VarChar(12)
  montoPago      Int?
  tipoEmpleado   String?   @db.VarChar(100)
  puesto         String?   @db.VarChar(100)
  fechaInicio    DateTime? @db.Date
  fechaFin       DateTime? @db.Date
  jornada        String?   @db.VarChar(100)
  empleado       empleado  @relation(fields: [cedulaEmpleado], references: [cedula], onUpdate: NoAction, map: "FK__esContrat__cedul__6319B466")
  proyecto       proyecto  @relation(fields: [cedulaJuridica, nombreProyecto], references: [cedulaJuridica, nombre], onDelete: Cascade, map: "FK__esContratado__640DD89F")

  @@id([cedulaJuridica, nombreProyecto, cedulaEmpleado], map: "PK__esContra__C9634E46606B3491")
}

model genera {
  cedulaEmpleado String   @db.VarChar(12)
  fechaHora      DateTime @db.DateTime
  cedulaJuridica String   @db.VarChar(12)
  nombreProyecto String   @db.VarChar(100)
  pago           pago     @relation(fields: [cedulaEmpleado, fechaHora], references: [cedulaEmpleado, fechaHora], onUpdate: NoAction, map: "FK__genera__7814D14C")
  proyecto       proyecto @relation(fields: [cedulaJuridica, nombreProyecto], references: [cedulaJuridica, nombre], onDelete: Cascade, map: "FK__genera__7720AD13")

  @@id([cedulaEmpleado, fechaHora, cedulaJuridica, nombreProyecto], map: "PK__genera__12AD7FEDAB20F4EC")
}

model hace_uso {
  cedula       String       @db.VarChar(12)
  email        String       @db.VarChar(100)
  persona      persona      @relation(fields: [cedula], references: [cedula], onUpdate: NoAction, map: "FK__hace_uso__cedula__5006DFF2")
  credenciales credenciales @relation(fields: [email], references: [email], onDelete: Cascade, map: "FK__hace_uso__email__50FB042B")

  @@id([cedula, email], map: "PK__hace_uso__0BED9DF2274BB338")
}

model pago {
  cedulaEmpleado String      @db.VarChar(12)
  fechaHora      DateTime    @db.DateTime
  salarioBruto   Int?
  habilitado     Boolean?
  empleado       empleado    @relation(fields: [cedulaEmpleado], references: [cedula], onUpdate: NoAction, map: "FK__pago__cedulaEmpl__68D28DBC")
  aplica_b       aplica_b[]
  aplica_do      aplica_do[]
  aplica_dv      aplica_dv[]
  genera         genera[]

  @@id([cedulaEmpleado, fechaHora], map: "PK__pago__626A902FB390E117")
}

model persona {
  cedula    String     @id(map: "PK__persona__415B7BE4D6109199") @db.VarChar(12)
  nombre    String?    @db.VarChar(100)
  telefono  Int?
  empleado  empleado?
  empleador empleador?
  hace_uso  hace_uso[]
}

model proyecto {
  cedulaJuridica           String                @db.VarChar(12)
  nombre                   String                @db.VarChar(100)
  cantidadMaximaBeneficios Int?
  montoMaximoBeneficio     Int?
  frecuenciaPago           String?               @db.VarChar(100)
  moneda                   String?               @db.VarChar(10)
  fechaInicio              DateTime?             @db.Date
  habilitado               Boolean?
  empresa                  empresa               @relation(fields: [cedulaJuridica], references: [cedulaJuridica], onUpdate: NoAction, map: "FK__proyecto__cedula__5D60DB10")
  beneficios               beneficios[]
  deduccionVoluntaria      deduccionVoluntaria[]
  esContratado             esContratado[]
  genera                   genera[]
  reporteHoras             reporteHoras[]

  @@id([cedulaJuridica, nombre], map: "PK__proyecto__BAB0B479BEF9EC16")
}

model reporteHoras {
  cedulaEmpleado  String     @db.VarChar(12)
  cedulaEmpleador String?    @db.VarChar(12)
  cedulaJuridica  String?    @db.VarChar(12)
  nombreProyecto  String?    @db.VarChar(100)
  fechaHora       DateTime   @db.DateTime
  horasTrabajadas Int?
  estado          Int?
  empleado        empleado   @relation(fields: [cedulaEmpleado], references: [cedula], onUpdate: NoAction, map: "FK__reporteHo__cedul__6E8B6712")
  empleador       empleador? @relation(fields: [cedulaEmpleador], references: [cedula], onDelete: NoAction, onUpdate: NoAction, map: "FK__reporteHo__cedul__6F7F8B4B")
  proyecto        proyecto?  @relation(fields: [cedulaJuridica, nombreProyecto], references: [cedulaJuridica, nombre], onDelete: Cascade, map: "FK__reporteHoras__7073AF84")

  @@id([cedulaEmpleado, fechaHora], map: "PK__reporteH__626A902F94AA2904")
}

model selecciona {
  cedulaEmpleado  String     @db.VarChar(12)
  cedulaJuridica  String     @db.VarChar(12)
  nombreProyecto  String     @db.VarChar(100)
  nombreBeneficio String     @db.VarChar(100)
  habilitado      Boolean?
  empleado        empleado   @relation(fields: [cedulaEmpleado], references: [cedula], onUpdate: NoAction, map: "FK__seleccion__cedul__038683F8")
  beneficios      beneficios @relation(fields: [cedulaJuridica, nombreProyecto, nombreBeneficio], references: [cedulaJuridica, nombreProyecto, nombreBeneficio], onDelete: Cascade, map: "FK__selecciona__02925FBF")

  @@id([cedulaEmpleado, cedulaJuridica, nombreProyecto, nombreBeneficio], map: "PK__seleccio__9645CB416B5579D2")
}
